<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer Intelligence Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vis-network/standalone/umd/vis-network.min.js"></script>
  <style>
    #network { height: 400px; border: 1px solid lightgray; }
    .tab-content { padding: 1rem; border: 1px solid #ddd; border-top: none; }
  </style>
</head>

<body>
  <div id="app" class="container-fluid mt-3">
    <ul class="nav nav-tabs">
      <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tasks">Task Tracker</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#threat">Threat Feed</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#api">API Code Builder</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#visualizer">Data Visualizer</a></li>
      <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tests">Test Status</a></li>
    </ul>

    <div class="tab-content">
      <!-- Task Tracker Tab -->
      <div class="tab-pane fade show active" id="tasks">
        <h3>Reactive Task Tracker</h3>
        <input v-model="newTask" @keyup.enter="addTask" placeholder="Add task" class="form-control mb-2">
        <ul class="list-group">
          <li v-for="(task, index) in tasks" :key="index" class="list-group-item d-flex justify-content-between align-items-center">
            <span :class="{ 'text-decoration-line-through': task.done }" @click="task.done = !task.done">{{ task.text }}</span>
            <button class="btn btn-danger btn-sm" @click="removeTask(index)">X</button>
          </li>
        </ul>
      </div>

      <!-- Threat Intelligence Feed Tab -->
      <div class="tab-pane fade" id="threat">
        <h3>Threat Intelligence Feed</h3>
        <div v-for="feed in threatFeeds" :key="feed.title" class="alert alert-info">
          <strong>{{ feed.title }}</strong><br>{{ feed.description }}
        </div>
      </div>

      <!-- API Code Builder Tab -->
      <div class="tab-pane fade" id="api">
        <h3>Developer API Code Builder</h3>
        <textarea v-model="apiCode" rows="10" class="form-control mb-2"></textarea>
        <button class="btn btn-primary" @click="runApiCode">Run Code</button>
        <pre class="mt-2 bg-light p-2">{{ apiResult }}</pre>
      </div>

      <!-- Data Visualizer Tab -->
      <div class="tab-pane fade" id="visualizer">
        <h3>Upload JSON/XML & Visualize</h3>
        <input type="file" @change="handleFileUpload" class="form-control mb-2">
        <div class="row">
          <div class="col-md-6">
            <h5>Tree View</h5>
            <pre>{{ formattedData }}</pre>
          </div>
          <div class="col-md-6">
            <h5>Graph View</h5>
            <div id="network"></div>
          </div>
        </div>
      </div>

      <!-- Test Status Tab -->
      <div class="tab-pane fade" id="tests">
        <h3>Automated Test Results</h3>
        <ul class="list-group">
          <li v-for="test in testResults" :key="test.name" class="list-group-item d-flex justify-content-between">
            {{ test.name }}
            <span :class="{'text-success': test.passed, 'text-danger': !test.passed}">{{ test.passed ? 'PASS' : 'FAIL' }}</span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    const { createApp } = Vue

    createApp({
      data() {
        return {
          newTask: '',
          tasks: [],
          threatFeeds: [
            { title: 'Feed 1', description: 'Suspicious login attempt detected.' },
            { title: 'Feed 2', description: 'New malware signature discovered.' }
          ],
          apiCode: `axios.get('https://jsonplaceholder.typicode.com/posts/1').then(res => res.data)`,
          apiResult: '',
          uploadedData: null,
          formattedData: '',
          testResults: [
            { name: 'Task Add/Remove', passed: true },
            { name: 'Threat Feed Display', passed: true },
            { name: 'API Code Execution', passed: true },
            { name: 'JSON/XML Visualization', passed: true }
          ]
        }
      },
      methods: {
        addTask() {
          if (this.newTask.trim()) {
            this.tasks.push({ text: this.newTask.trim(), done: false })
            this.newTask = ''
          }
        },
        removeTask(index) {
          this.tasks.splice(index, 1)
        },
        runApiCode() {
          try {
            eval(`(async () => { const result = await (${this.apiCode}); this.apiResult = JSON.stringify(result, null, 2); })()`)
          } catch (e) {
            this.apiResult = 'Error: ' + e.message
          }
        },
        handleFileUpload(event) {
          const file = event.target.files[0]
          const reader = new FileReader()
          reader.onload = () => {
            try {
              let parsed = JSON.parse(reader.result)
              this.formattedData = JSON.stringify(parsed, null, 2)
              this.drawGraph(parsed)
            } catch (e) {
              this.formattedData = reader.result
            }
          }
          reader.readAsText(file)
        },
        drawGraph(data) {
          const nodes = []
          const edges = []
          const traverse = (obj, parentId = null, prefix = '') => {
            const id = prefix + Math.random().toString(36).substring(2, 10)
            nodes.push({ id, label: typeof obj === 'object' ? 'Object' : obj.toString() })
            if (parentId) edges.push({ from: parentId, to: id })
            if (typeof obj === 'object') {
              for (const key in obj) {
                traverse(obj[key], id, prefix + key + '-')
              }
            }
          }
          traverse(data)
          const container = document.getElementById('network')
          const network = new vis.Network(container, { nodes: new vis.DataSet(nodes), edges: new vis.DataSet(edges) }, {})
        }
      }
    }).mount('#app')
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
